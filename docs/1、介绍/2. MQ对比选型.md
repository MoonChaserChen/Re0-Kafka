# MQ对比
## MQ作用
解耦、异步、削峰
## MQ注意事项
1. 可用性。MQ挂了对系统的影响。MQ单点挂了会怎样？
2. MQ丢失
3. MQ顺序性
4. 重复消费
5. 一致性问题
## MQ选型
|                 | ActiveMQ   | RabbitMQ   | RocketMQ           | Kafka              |
|-----------------|------------|------------|--------------------|--------------------|
| 开发语言            | Java       | erlang(较偏) | Java               | Scala、Java         |
| 诞生时间            | 2003年      | 2006年      | 2012年              | 2011年              |
| 流行程度            | Star2.2K   | Star3.9K   | Star19.7K          | Star25.7K          |
| 活跃程度            | 85tags     | 476tags    | 29tags             | 222tags            |
| 单机吞吐量           | 万级         | 万级         | 10 万级              | 10 万级              |
| topic 数量对吞吐量的影响 |            |            | 几百/几千有较小幅度的下降      | 几十/几百大幅度下降         |
| 延迟/时效性          | ms 级       | 微秒级，最优     | ms 级               | ms 级以内             |
| 消息可靠性           | 有较低的概率丢失数据 | 基本不丢       | 经过参数优化配置，可以做到 0 丢失 | 经过参数优化配置，可以做到 0 丢失 |
| MQ功能支持          | 极其完备       | 较为完善       | 较为完善               | 简单的 MQ 功能（不仅是MQ）   |
| 消息持久化           | 支持         | 支持         | ？                  | ？                  |
| 依赖              | ？          | ？          | ？                  | zookeeper/KRaft    |

1）中小型软件公司，建议选RabbitMQ。一方面，erlang语言天生具备高并发的特性，而且他的管理界面用起来十分方便。
不考虑rocketmq和kafka的原因是，一方面中小型软件公司不如互联网公司，数据量没那么大，选消息中间件，应首选功能比较完备的，所以kafka排除。
RocketMQ也很不错，只是没有RabbitMQ出来的早，文档和网上的资料没有RabbitMQ多，但也是很不错，RocketMQ是阿里出品，现在阿里已经把RocketMQ捐赠给Apache了，维护和更新不是问题 。

2)大型软件公司，根据具体使用在rocketMq和kafka之间二选一。一方面，大型软件公司，具备足够的资金搭建分布式环境，也具备足够大的数据量。
针对rocketMQ,大型软件公司也可以抽出人手对rocketMQ进行定制化开发，毕竟国内有能力改JAVA源码的人，还是相当多的。
至于kafka，根据业务场景选择，如果有日志采集功能，肯定是首选kafka了。具体该选哪个，看使用场景。